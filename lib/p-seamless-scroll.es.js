function e(e,o){if(!function(){if(!o.el||!o.el instanceof HTMLElement)return console.error('请挂载正确的el元素！例如：document.getElementById("id")'),!1;if(!["up","down","left","right"].includes(o.config.direction))return console.error("请挂载正确的direction滚动方向！例如：up、down、left、right"),!1;if(o.config.speed<1||o.config.speed>1e5)return console.error("请挂载正确的speed滚动速度！例如：1-100000"),!1;if(o.config.loop&&1!=o.config.loop&&0!=o.config.loop)return console.error("请挂载正确的loop是否循环滚动！例如：true、false"),!1;if(o.config.hoverStop&&1!=o.config.hoverStop&&0!=o.config.hoverStop)return console.error("请挂载正确的hoverStop是否鼠标移入停止！例如：true、false"),!1;if(o.config.auto&&1!=o.config.auto&&0!=o.config.auto)return console.error("请挂载正确的auto是否自动滚动！例如：true、false"),!1;return!0}())return;let t=l(o.el),i=l(o.el.parentElement);if(t<i)return console.warn("元素高度小于其父元素，无需开启滚动！");let r=0;"down"!=o.config.direction&&"right"!=o.config.direction||(r=-t);let n=o.el.children.length,s=0;for(let e=0;e<n&&(s+=l(o.el.children[e]),o.el.append(o.el.children[e].cloneNode(!0)),!(s>=i));e++);function l(e){return"down"==o.config.direction||"up"==o.config.direction?e.offsetHeight:"left"==o.config.direction||"right"==o.config.direction?e.offsetWidth:0}function c(){function i(){o.el.animate({transform:"translate(0px, "+r+"px)"},{duration:0,fill:"forwards"}),c()}function n(){o.el.animate({transform:"translate(0px, "+r+"px)"},{duration:o.config.speed,fill:"forwards"})}e.state.isPause||("up"==o.config.direction?-1*r>=t&&o.config.loop?(r=0,i()):(r-=10,n()):"down"==o.config.direction&&(r>=0&&o.config.loop?(r=-t,i()):(r+=10,n())))}o.config.hoverStop&&(o.el.onmouseover=()=>{e.state.isHover=!0,o.isHoverShield||(e.state.isPause=!0)},o.el.onmouseout=()=>{e.state.isHover=!1,o.isHoverShield||(e.state.isPause=!1)}),o.config.auto&&function(){o.isStart=!0,o.timer&&clearInterval(o.timer);o.timer=setInterval((()=>{c()}),o.config.speed)}()}class o{constructor(o){let t={el:o.el,config:{direction:o.direction||"up",hoverStop:o.hoverStop||!0,speed:o.speed||100,auto:o.auto||!0,loop:o.loop||!0},timer:null,isHoverShield:!1,isStart:!1};this.state={isHover:!1,isPause:!1},this.api={play:()=>{this.state.isPause=!1,t.isHoverShield=!1,t.isStart||toStart()},pause:()=>{this.state.isPause=!0,t.isHoverShield=!0},reload:o=>{if(o)for(let e in o)this.config[e]=o[e];e(this,t)},destroy:()=>{var e;(e=t).timer&&clearInterval(e.timer),e.config.hoverStop&&(e.el.onmouseover.remove(),e.el.onmouseout.remove()),e=null},getState:()=>this.state},e(this,t)}}export{o as default};
