/*!
* p-seamless-scroll v0.6.4
* Copyright 2024 Pbstar (https://github.com/pbstar)
* Licensed under MIT (https://github.com/pbstar/p-seamless-scroll/blob/main/LICENSE)
* 2024-07-18 15:41:47
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).pSeamlessScroll=t()}(this,(function(){"use strict";function e(e,t){return"down"==e.config.direction||"up"==e.config.direction?t.offsetHeight:"left"==e.config.direction||"right"==e.config.direction?t.offsetWidth:0}function t(e){var t,i;"up"==e.config.direction||"down"==e.config.direction?null===(t=e.el.firstElementChild)||void 0===t||t.animate({transform:"translate(0px, "+e.distance+"px)"},{duration:0,fill:"forwards"}):"left"!=e.config.direction&&"right"!=e.config.direction||null===(i=e.el.firstElementChild)||void 0===i||i.animate({transform:"translate("+e.distance+"px, 0px)"},{duration:0,fill:"forwards"})}function i(e){!function i(){if(e.state.isPause)return;if("up"==e.config.direction||"left"==e.config.direction)if(Math.abs(e.distance)>=e.contentDistance){if(e.distance=0,t(e),!e.config.loop)return void(e.state.isPause=!0);i()}else if(e.contentDistance-Math.abs(e.distance)<e.step){var n=(e.contentDistance-Math.abs(e.distance))/e.step*e.config.speed;e.distance=-e.contentDistance,o(n)}else e.distance-=e.step,o(e.config.speed);else if("down"==e.config.direction||"right"==e.config.direction)if(e.distance>=0){if(e.distance=-e.contentDistance,t(e),!e.config.loop)return void(e.state.isPause=!0);i()}else if(Math.abs(e.distance)<e.step){n=Math.abs(e.distance)/e.step*e.config.speed;e.distance=0,o(n)}else e.distance+=e.step,o(e.config.speed);function o(t){e.config.rest&&(e.restDistance+=e.step*t/e.config.speed,function(e,t){e.restDistance>=e.config.rest.distance&&(e.restDistance=0,e.state.isPause=!0,e.restTimer&&clearTimeout(e.restTimer),e.restTimer=setTimeout((function(){e.state.isPause=!1,t()}),e.config.rest.time))}(e,i)),function(e,t){var i,n;"up"==e.config.direction||"down"==e.config.direction?null===(i=e.el.firstElementChild)||void 0===i||i.animate({transform:"translate(0px, "+e.distance+"px)"},{duration:t,fill:"forwards"}):"left"!=e.config.direction&&"right"!=e.config.direction||null===(n=e.el.firstElementChild)||void 0===n||n.animate({transform:"translate("+e.distance+"px, 0px)"},{duration:t,fill:"forwards"})}(e,t),e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){i()}),t)}}()}function n(t){if(function(e){if(!e.el)return console.error("ErrCode:101"),!1;if(e.raw_el=e.el.innerHTML,!e.config.directionList.includes(e.config.direction))return console.error("ErrCode:102"),!1;if(e.config.speed<1||e.config.speed>1e5)return console.error("ErrCode:103"),!1;if(e.config.loop&&1!=e.config.loop&&0!=e.config.loop)return console.error("ErrCode:104"),!1;if(e.config.hoverStop&&1!=e.config.hoverStop&&0!=e.config.hoverStop)return console.error("ErrCode:105"),!1;if(e.config.auto&&1!=e.config.auto&&0!=e.config.auto)return console.error("ErrCode:106"),!1;if(e.config.rest){if(!e.config.rest.distance||e.config.rest.distance<10||e.config.rest.distance>1e5||e.config.rest.distance%10!=0)return console.error("ErrCode:107-1"),!1;if(!e.config.rest.time||e.config.rest.time<1||e.config.rest.time>1e5)return console.error("ErrCode:107-2"),!1}return!0}(t)){if(function(e){e.state={isHover:!1,isPause:!1},e.timer=null,e.restTimer=null,e.isHoverShield=!1,e.contentDistance=0,e.viewDistance=0,e.step=10,e.distance=0,e.restDistance=0,e.isInit=!1}(t),function(e){var t=document.createElement("div");t.style.display="inline-flex","up"!=e.config.direction&&"down"!=e.config.direction||(t.style.flexDirection="column");for(var i=0;i<e.el.children.length;i++)t.append(e.el.children[i]);e.el.append(t),t=null}(t),t.contentDistance=e(t,t.el.firstElementChild),t.viewDistance=e(t,t.el),t.contentDistance<t.viewDistance)return console.error("ErrCode:108");if(t.viewDistance<t.step)return console.error("ErrCode:109");!function(t){for(var i,n,o,r,s,c=(null===(i=t.el.firstElementChild)||void 0===i?void 0:i.children.length)||0,f=0,l=0;l<c&&(f+=e(t,null===(n=t.el.firstElementChild)||void 0===n?void 0:n.children[l]),null===(o=t.el.firstElementChild)||void 0===o||o.append(null===(s=null===(r=t.el.firstElementChild)||void 0===r?void 0:r.children[l])||void 0===s?void 0:s.cloneNode(!0)),!(f>=t.viewDistance));l++);}(t),function(e,t){e.el.onmouseover=function(){e.state.isHover||(e.state.isHover=!0,e.isHoverShield||e.config.hoverStop&&(e.state.isPause=!0,t()))},e.el.onmouseout=function(){e.state.isHover&&(e.state.isHover=!1,e.isHoverShield||e.config.hoverStop&&(e.state.isPause=!1,t()))}}(t,(function(){i(t)})),t.isInit=!0,t.config.auto&&i(t)}}function o(e){if(!e.isInit)return console.error("ErrCode:110");e.isInit=!1,e.el.innerHTML=e.raw_el,e.timer&&clearTimeout(e.timer),e.restTimer&&clearTimeout(e.restTimer),e.config.hoverStop&&e.el.onmouseover&&(e.el.onmouseover=null,e.el.onmouseout=null)}var r={el:null,raw_el:null,config:{direction:"up",directionList:["up","down","left","right"],hoverStop:!0,speed:100,auto:!0,loop:!0,rest:null},state:{isHover:!1,isPause:!1},timer:null,restTimer:null,isHoverShield:!1,contentDistance:0,viewDistance:0,step:10,distance:0,restDistance:0,isInit:!1,watchs:[]};return function(){function e(e){var t,i;r.el=e.el,r.config.direction=e.direction||"up",r.config.hoverStop=!1!==e.hoverStop,r.config.speed=e.speed||100,r.config.auto=!1!==e.auto,r.config.loop=!1!==e.loop,r.config.rest=e.rest||null,this.state={isHover:!1,isPause:!1},n(r),i=this,(t=r).state=new Proxy(t.state,{set:function(e,n,o,r){i.state[n]=o,"isPause"==n&&t.restTimer&&clearTimeout(t.restTimer);for(var s=0;s<t.watchs.length;s++){var c=t.watchs[s],f=c.ks,l=c.f;f==n&&l(o)}return Reflect.set(e,n,o,r)}})}return e.prototype.play=function(){!function(e){if(!e.isInit)return console.error("ErrCode:110");e.state.isPause=!1,e.isHoverShield=!1,i(e)}(r)},e.prototype.pause=function(){!function(e){if(!e.isInit)return console.error("ErrCode:110");e.state.isPause=!0,e.isHoverShield=!0}(r)},e.prototype.reload=function(e){o(r),r.config.direction=e.direction||"up",r.config.hoverStop=!1!==e.hoverStop,r.config.speed=e.speed||100,r.config.auto=!1!==e.auto,r.config.loop=!1!==e.loop,r.config.rest=e.rest||null,n(r)},e.prototype.destroy=function(){o(r)},e.prototype.getState=function(){return r.state},e.prototype.on=function(e,t){"hover"==e?r.watchs.push({es:e,ks:"isHover",f:t}):"pause"==e&&r.watchs.push({es:e,ks:"isPause",f:t})},e.prototype.off=function(e){var t=r.watchs.filter((function(t){return t.es!==e}));r.watchs=t},e}()}));
